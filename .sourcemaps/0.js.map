{"version":3,"sources":["../../src/pages/send-invite/send-invite.module.ts","../../src/pages/send-invite/send-invite.ts","../../node_modules/@ionic-native/date-picker/index.js"],"names":[],"mappings":"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CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,EAA1C,CAA0C,CAClD;IACH,CAAC;IA1HU,cAAc;QAL1B,gEAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;YAC5B,WAAW,8EAAE,CAAkB;WACR;SACxB,CAAC;6EAiByC;YACd,6EAAS;YACL,4FAAU;YACJ,8DAAgB;YAC1B,sFAAM;YACJ,WAAgB;OArBlC,cAAc,CA6H1B;IAAD,CAAC;AAAA;SA7HY,cAAc,gB;;;;;;;;ACf3B;AAAA;AAAA;AAAA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AAC2C;AAC6B;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA,SAAS,OAAO,yDAAU,EAAE;AAC5B;AACA;AACA,6CAA6C,WAAW;AACxD;AACA,QAAQ,2EAAO;AACf;AACA;AACA;AACA;AACA;AACA,QAAQ,0EAAM;AACd;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,CAAC,6EAAiB;AACG;AACtB,iC","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SendInvitePage } from './send-invite';\n\n@NgModule({\n  declarations: [\n    SendInvitePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SendInvitePage),\n  ],\n  exports: [\n    SendInvitePage\n  ]\n})\nexport class SendInvitePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/send-invite/send-invite.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport { DatePicker } from '@ionic-native/date-picker';\nimport  moment  from 'moment';\n\nimport { CourtDataService } from '../../services/courtDataService.service';\nimport { RealtimeProvider } from '../../providers/realtime/realtime';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-send-invite',\n  templateUrl: 'send-invite.html',\n  providers: [DatePicker]\n})\nexport class SendInvitePage {\n\n  // When the user wants to invite their friends\n  dateDate: Date = new Date();\n  dateString: string;\n  timeString: string = '';\n\n  // users who ave been invited\n  invited: Array<any>\n\n  // User currently logged in\n  currentUser: any;\n\n  // Wheter or not to sow te error message;\n  error: boolean = false;\n\n  constructor(public navCtrl: NavController,\n              public params: NavParams,\n              public datePicker: DatePicker,\n              public courtDataService: CourtDataService,\n              public events: Events,\n              public realtime: RealtimeProvider)\n  {\n    // set Datestring to be today's date, formatted sexily\n    this.dateString = moment(new Date()).format('dddd MMM D')\n\n    this.invited = params.get('invited');\n\n    this.getCurrentUser();\n  }\n\n\n  // Post1: Date picker is displayed\n  // Post2: dateString and dateDate set to te date received\n  public pickDate(){\n\n    let min = new Date().getDate();\n    let max = new Date().getMonth() + 1;\n\n    //let nextYear = new Date().get\n\n    // alert(new Date().setMonth(max).setYear(new Date().getMonth() + 1))\n\n    //alert moment()\n\n    this.datePicker.show({\n      date: new Date(),\n      mode: 'date',\n      minDate: new Date().setDate(min),\n      maxDate: new Date().setMonth(max),\n      okText: 'Select',\n      androidTheme: 5\n    }).then(\n      date => {\n        this.dateDate = date;\n        this.dateString = moment(date).format(\"dddd MMM D\")\n      },\n      err => console.log('Error occurred while getting date: ', err)\n    );\n  }\n\n\n  // Post: Invitation notification is sent to the friends selected\n  public send(){\n\n    // TODO: Ensure User has inputed all relevent info\n\n    if(this.timeString === ''){\n      this.error = true;\n      return;\n    }\n\n    // combine timeString & dateDate into one date object\n    this.dateDate.setHours(+this.timeString.substring(0,2))\n    this.dateDate.setMinutes(+this.timeString.substring(3))\n\n    if(!this.currentUser)\n      this.currentUser = JSON.parse(window.localStorage.getItem('currentUser'))\n\n    let channels: Array<string> = []\n    for(let friend of this.invited)\n      channels.push(friend._id);\n    let userName = this.currentUser.fName + ' ' + this.currentUser.lName\n\n    let payload = {\n      messageType: 'invitation',\n      userName: userName,\n      user_id: this.currentUser._id,\n      courtName: this.params.get('court').name,\n      court_id: this.params.get('court')._id,\n      dateTime: this.dateDate,\n    }\n\n    this.realtime.notify(channels, payload, userName + ' invites you to hoop!');\n    this.navCtrl.popToRoot().then(() => {\n      let message = 'You\\'ve successfully invited '\n      if(this.invited.length > 5)\n        message = message + 'your friends to hoop.'\n      else if(this.invited.length === 1)\n        message += this.invited[0].fName + ' to hoop.'\n      else {\n        let i: number = 0;\n        while(i < this.invited.length - 1){\n          message += this.invited[i].fName + ', ';\n          i++;\n        }\n        message = message.substring(0, message.length - 2)\n        message += ' and ' + this.invited[this.invited.length - 1].fName + ' to hoop.'\n      }\n\n      message += ' We hope that you have a happy session.'\n\n      this.courtDataService.notify('Invitation Sent!', message)\n    })\n  }\n\n  // Post: this.user is set to the current user\n  public getCurrentUser(){\n    this.courtDataService.getCurrentUser().subscribe(\n      res => this.currentUser = res.json()[0],\n      err => this.courtDataService.notify('ERROR', err)\n    )\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/send-invite/send-invite.ts","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Injectable } from '@angular/core';\nimport { Cordova, IonicNativePlugin, Plugin } from '@ionic-native/core';\n/**\n * @name Date Picker\n * @description\n * The DatePicker plugin allows the user to fetch date or time using native dialogs.\n *\n * @usage\n * ```typescript\n * import { DatePicker } from '@ionic-native/date-picker';\n *\n * constructor(private datePicker: DatePicker) { }\n *\n *\n * ...\n *\n *\n * this.datePicker.show({\n *   date: new Date(),\n *   mode: 'date',\n *   androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK\n * }).then(\n *   date => console.log('Got date: ', date),\n *   err => console.log('Error occurred while getting date: ', err)\n * );\n * ```\n * @interfaces\n * DatePickerOptions\n */\nvar DatePicker = (function (_super) {\n    __extends(DatePicker, _super);\n    function DatePicker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * @hidden\n         */\n        _this.ANDROID_THEMES = {\n            THEME_TRADITIONAL: 1,\n            THEME_HOLO_DARK: 2,\n            THEME_HOLO_LIGHT: 3,\n            THEME_DEVICE_DEFAULT_DARK: 4,\n            THEME_DEVICE_DEFAULT_LIGHT: 5\n        };\n        return _this;\n    }\n    /**\n     * Shows the date and/or time picker dialog(s)\n     * @param {DatePickerOptions} options Options for the date picker.\n     * @returns {Promise<Date>} Returns a promise that resolves with the picked date and/or time, or rejects with an error.\n     */\n    DatePicker.prototype.show = function (options) {\n        return;\n    };\n    DatePicker.decorators = [\n        { type: Injectable },\n    ];\n    /** @nocollapse */\n    DatePicker.ctorParameters = function () { return []; };\n    __decorate([\n        Cordova(),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Object]),\n        __metadata(\"design:returntype\", Promise)\n    ], DatePicker.prototype, \"show\", null);\n    DatePicker = __decorate([\n        Plugin({\n            pluginName: 'DatePicker',\n            plugin: 'cordova-plugin-datepicker',\n            pluginRef: 'datePicker',\n            repo: 'https://github.com/VitaliiBlagodir/cordova-plugin-datepicker',\n            platforms: ['Android', 'iOS', 'Windows']\n        })\n    ], DatePicker);\n    return DatePicker;\n}(IonicNativePlugin));\nexport { DatePicker };\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@ionic-native/date-picker/index.js\n// module id = 895\n// module chunks = 0"],"sourceRoot":""}