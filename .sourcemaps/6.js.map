{"version":3,"sources":["../../src/pages/add-closing/add-closing.module.ts","../../src/pages/add-closing/add-closing.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddClosingPage } from './add-closing';\n\n@NgModule({\n  declarations: [\n    AddClosingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddClosingPage),\n  ],\n  exports: [\n    AddClosingPage\n  ]\n})\nexport class AddClosingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-closing/add-closing.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ViewController, NavParams, AlertController,\n  Events, NavController, ModalController} from 'ionic-angular';\nimport { CourtDataService } from '../../services/courtDataService.service';\nimport { LoadingPage } from '../loading/loading';\nimport moment from 'moment';\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-add-closing',\n  templateUrl: 'add-closing.html',\n})\nexport class AddClosingPage {\n\n\n    closure:any;\n\n    // Whether or not we display an error message pertaining to input time\n    timeError: boolean;\n    enterError: boolean;\n    // String objects to capture time\n    startString: string;\n    endString: string;\n    // String in the navbar\n    navbar: string;\n\n    constructor(public viewCtrl: ViewController,\n                private params: NavParams,\n                public alertCtrl: AlertController,\n                public navCtrl: NavController,\n                public events: Events,\n                public courtDataService: CourtDataService,\n                public modalCtrl: ModalController) {\n      this.closure = params.get('closure');\n      //this.timeError = true;\n      // if we are not editing a closure and are therefore creating a new one\n      if(!params.get('edit')){\n        this.closure = {\n          clStart: {},\n          clEnd: {},\n          reason: \"\",\n          baskets:0,\n          days: [0,0,0,0,0,0,0],\n          repeat: false\n        }\n        this.navbar = \"Add Closing\";\n      }\n      else {\n        this.closure = params.get('closure');\n\n        // ISO 8601 dates were giving me all kinds of trouble, so for now we will not have prepopulated dates on the add closure form.\n        // It isn't the biggest bullet to bite. We'll live.\n\n        //this.startString = new Date().toISOString();\n        //this.endString = this.closure.clEnd.toISOString();\n        this.navbar = \"Edit Closing\";\n      }\n\n    }\n\n    // Post: Alert presented which instructs user to add closure information\n    public instructions(){\n      this.alertCtrl.create({\n        title: \"So the court is closed..\",\n        message: \"Please share, if you can find it, information on this court closing\"\n        + \" with your fellow players.\",\n        buttons: [{\n          text: \"dismiss\",\n          role: 'cancel'\n        }]\n      }).present();\n    }\n\n    // Post1: Errors found with input data and error message is displayed\n    // Post2: Data is collected and sent to the server\n    submit(){\n\n      // reset the error messages\n      this.timeError = false; this.enterError = false;\n\n      // Check that we have a day entered\n      let dayEntered:boolean = false;\n      for(let day of this.closure.days)\n        if(day > 0){  dayEntered = true; break;  }\n\n      // check that all fields have values\n      if(this.startString == null || this.endString == null || this.closure.baskets === 0\n      || this.closure.reason === \"\" || !dayEntered){\n        this.enterError = true;\n        return;\n      }\n\n      // parse dateStrings to date objects\n      this.closure.clStart = new Date();\n      this.closure.clStart.setHours(+this.startString.substring(0,2));\n      this.closure.clStart.setMinutes(+this.startString.substring(3));\n      this.closure.clEnd = new Date();\n      this.closure.clEnd.setHours(+this.endString.substring(0,2));\n      this.closure.clEnd.setMinutes(+this.endString.substring(3));\n\n      // ensure that startTime is before endTime\n       if(this.closure.clStart.getTime() >= this.closure.clEnd.getTime()){\n         this.timeError = true;\n         return;\n       }\n\n       // If we got here we've got a valid closure - Dismiss with data\n\n       if(this.params.get('fromGamesModal')){\n         //this.formatTimestrings(this.closure);\n         // Pop this page, raise load screen, submit data to server, provide user with success/fail feedback\n         this.navCtrl.pop().then(() => {\n           let loadScreen = this.modalCtrl.create(LoadingPage, { loadingMessage: 'submitting court closing' },\n           { enterAnimation: 'ModalEnterFadeIn', leaveAnimation: 'ModalLeaveFadeOut' })\n           loadScreen.present();\n           this.courtDataService.postClosure(this.closure, this.params.get('court_id')).subscribe(\n             res => {\n               loadScreen.dismiss().then(() => {\n                 this.courtDataService.notify('Court Closing Added',\n                 'Thank you for updating the current activity at your court. Your fellow ballers thank you.')\n               })\n             },\n             err => {\n               loadScreen.dismiss().then(() => {\n                 this.courtDataService.notify('Error', 'Error submitting court closing. Please try again later.');\n               })\n             }\n           )\n         })\n         return;\n       }\n\n       this.navCtrl.pop();\n       this.events.publish('newClosureData', {\n         closure: this.closure,\n         edit: this.params.get('edit')\n       })\n    }\n\n\n    // Post: date object is converted to sexy timeString, which is added to closure\n    // Param: closure to be edited\n    // Pre: Closure has clStart and clEnd date objects\n    private formatTimestrings(closure){\n      closure.tss = moment(closure.clStart).format('h:mma');\n      closure.tss = closure.tss.substring(0, closure.tss.length - 1);\n      closure.tse = moment(closure.clEnd).format('h:mma');\n      closure.tse = closure.tse.substring(0, closure.tse.length - 1);\n    }\n\n\n    // post: Either adds or subtracts from baskets, with restrictions\n    // param: string s - whether or not to add or subtract from baskets\n    // pre: s is either 'plus' or 'minus'\n    // restrictions: baskets cannot drop below 0\n    //    baskets cannot be greater than total baskets at the court\n    public baskets(s: string){\n      if(s === 'plus' && this.closure.baskets < this.params.get('courtBaskets'))\n        this.closure.baskets ++;\n      else if(s === 'minus' && this.closure.baskets > 0)\n        this.closure.baskets--;\n    }\n\n    // post: days is switched from a 0 to a 1 or vice versa\n    // param: day - the day to be toggled\n    public daytoggle(day: number){\n      if(this.closure.days[day] > 0) this.closure.days[day] = 0;\n      else this.closure.days[day] = 1;\n    }\n\n    getStyle(day){\n      if(this.closure.days[day] > 0)\n        return '#33ccff';\n    }\n\n    // Post: repeat changed from true to false or vice versa\n    public toggleRepeat(){\n      if(this.closure.repeat)  this.closure.repeat = false;\n      else this.closure.repeat = true;\n    }\n\n  }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-closing/add-closing.ts"],"sourceRoot":""}